<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dr. Greenthumb â€” Weekly</title>
<style>
  :root { --bg:#0f1412; --card:#141a17; --ink:#e9f2ed; --muted:#a8bbb2; --accent:#6ee7b7; --line:#223028; }
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;}
  .wrap{max-width:860px;margin:0 auto;padding:20px;}
  header{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}
  h1{font-size:22px;margin:0;}
  .sub{color:var(--muted);font-size:14px}
  .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .btn{background:var(--card);color:var(--ink);border:1px solid var(--line);padding:6px 10px;border-radius:10px;font-size:13px}
  select{background:var(--card);color:var(--ink);border:1px solid var(--line);padding:6px 10px;border-radius:10px;font-size:13px}
  .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
  @media(min-width:700px){.grid{grid-template-columns:repeat(2,1fr);}}
  .day{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:12px}
  .day h3{margin:0 0 8px 0;font-size:16px;display:flex;justify-content:space-between;align-items:center}
  .tasks{display:flex;flex-direction:column;gap:10px}
  .task{display:flex;gap:10px;align-items:flex-start}
  .task input{width:18px;height:18px;margin-top:2px}
  .meta{font-size:12px;color:var(--muted)}
  hr{border:none;border-top:1px solid var(--line);margin:18px 0}
  footer{color:var(--muted);font-size:12px;margin-top:10px}
  .pill{display:inline-block;padding:4px 8px;border:1px solid var(--line);border-radius:999px;color:var(--ink);font-size:12px;margin-left:6px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1 id="theme">ðŸŒ¿ Green Haus</h1>
    <div class="sub" id="daterange">Week</div>
    <div class="controls">
      <button class="btn" id="prev">â—€ Prev</button>
      <button class="btn" id="today">This Week</button>
      <button class="btn" id="next">Next â–¶</button>
      <select id="weekSelect" title="Choose week"></select>
      <span class="pill" id="tip"></span>
    </div>
  </header>

  <div class="grid" id="week"></div>

  <hr/>
  <div class="sub">âœ¨ Dr. Greenthumb â€” multi-week, local-storage checklist. Edit weeks inside this file (CONFIG.WEEKS).</div>
  <footer>Green Haus â€¢ Petite-Pizza â€¢ Hosted on GitHub Pages</footer>
</div>

<script>
/* ========= CONFIGURE YOUR WEEKS HERE ========= */
// Emoji per weekday (Mon..Sun)
const EMOJI = ["ðŸŒž","ðŸŒ±","ðŸ’¦","ðŸª´","ðŸŒ¾","ðŸŒ¿","ðŸŒ¸"];

// Preloaded weeks: start = ISO Monday, theme, tips, and tasks per weekday index 0..6
const WEEKS = [
  {
    start: "2025-10-20", // Mon Oct 20, 2025
    theme: "ðŸ‚ Fall Reset",
    tips: ["Keep airflow up; skip misting if soil feels heavy.","Rotate Â¼ turn mid-week.","Post-repot: no fertilizer yet."],
    plan: {
      0: [ // Monday
        {text:'Soil check 2â€“3" deep â€” all Money Trees', meta:'Water today only if top layer is dry.'},
        {text:'Dracaena â€” soil check + light water if dry', meta:'Hasnâ€™t been watered lately.'},
        {text:'Terracotta Cactus Bowl â€” inspect remaining plants', meta:'If bone dry & firm, water gently with recovery mix.'}
      ],
      1: [ // Tuesday
        {text:'Rotate Money Trees + Dracaena for even light'},
        {text:'Wipe Dracaena leaves if dusty', opt:true}
      ],
      2: [ // Wednesday
        {text:'Mini Money Tree â€” watch for curling or pale leaves', meta:'Trim only if >50% yellow.'},
        {text:'Dracaena â€” mist lightly (only if soil is dry)', opt:true}
      ],
      3: [ // Thursday
        {text:'Surface fluff + airflow check â€” Money Trees & Dracaena'},
        {text:'Inspect cacti (Black Pot + Terracotta) for soft spots/rot'}
      ],
      4: [ // Friday
        {text:'Mix recovery water (64 oz = Â½ tsp) if low', meta:'Shake before each use.'},
        {text:'Quick pest scan â€” underside of leaves', opt:true}
      ],
      5: [ // Saturday
        {text:'Water cacti only if completely dry', meta:'Terracotta Bowl + Black Pot Family'}
      ],
      6: [ // Sunday
        {text:'Update Dr. Greenthumb â€” notes & skipped tasks'},
        {text:'Pick next weekâ€™s theme', opt:true}
      ]
    }
  },
  {
    start: "2025-10-27", // Week 2
    theme: "ðŸŒ¾ Root Renaissance",
    tips: ["Shorter days â€” favor bright, indirect light.","Water by dryness, not calendar.","Dust leaves = better photosynthesis."],
    plan: {
      0: [
        {text:'Soil check â€” Money Trees (2â€“3")', meta:'Water if dry; skip if cool/damp.'},
        {text:'Dracaena â€” soil check; water lightly if dry'}
      ],
      1: [
        {text:'Rotate Money Trees + Dracaena'},
        {text:'Mini Money Tree â€” check young stems'}
      ],
      2: [
        {text:'Cacti check (no water unless bone dry)'},
        {text:'Black Pot Family â€” fishbone stem check for firmness'}
      ],
      3: [
        {text:'Surface fluff â€” Money Trees & Dracaena'},
        {text:'Prune >50% yellow leaves on Tall Money Tree', opt:true}
      ],
      4: [
        {text:'Mix recovery water if low (64 oz = Â½ tsp)'},
        {text:'Quick shelf clean + remove old leaf debris', opt:true}
      ],
      5: [
        {text:'Money Trees â€” water any that are dry', meta:'Slow, even, stop at first drainage.'}
      ],
      6: [
        {text:'Log changes & skipped tasks'},
        {text:'Set theme for next week', opt:true}
      ]
    }
  },
  {
    start: "2025-11-03", // Week 3
    theme: "ðŸŒ¿ Steady Growth",
    tips: ["Mind drafts as temps drop.","Let topsoil dry a bit longer in November.","Keep light bright and consistent."],
    plan: {
      0: [
        {text:'Money Trees â€” soil check; water only if dry'},
        {text:'Dracaena â€” light water if dry; skip mist if soil heavy'}
      ],
      1: [
        {text:'Rotate Money Trees + Dracaena'},
        {text:'Wipe leaves (money trees + dracaena)', opt:true}
      ],
      2: [
        {text:'Cacti â€” visual check for softness; no water unless bone dry'}
      ],
      3: [
        {text:'Surface fluff + airflow check (all non-cacti)'}
      ],
      4: [
        {text:'Mix recovery water if low (64 oz = Â½ tsp)'}
      ],
      5: [
        {text:'Spot water any one plant that tested dry (not cacti)'}
      ],
      6: [
        {text:'Log & theme prep for next week'}
      ]
    }
  }
];

/* ========= UTILITIES ========= */
const MS = 86400000;
const toISOdate = d => new Date(d.getFullYear(), d.getMonth(), d.getDate()).toISOString().slice(0,10);
const fmt = d => d.toLocaleDateString(undefined,{month:'short',day:'numeric'});
const weekday = d => d.toLocaleDateString(undefined,{weekday:'long'});

/* ========= APP STATE ========= */
let idx = 0; // current week index (defaults to first)

/* ========= RENDER ========= */
function render(){
  const week = WEEKS[idx];
  const start = new Date(week.start + 'T00:00:00');
  const end = new Date(start.getTime()+6*MS);
  document.getElementById('theme').textContent = week.theme;
  document.getElementById('daterange').textContent = `${fmt(start)} â€“ ${fmt(end)}`;
  document.getElementById('tip').textContent = week.tips?.[0] || '';

  // week select
  const sel = document.getElementById('weekSelect');
  sel.innerHTML = '';
  WEEKS.forEach((w,i)=>{
    const s = new Date(w.start+'T00:00:00');
    const opt = document.createElement('option');
    opt.value = i; opt.textContent = `${fmt(s)} â€” ${w.theme.replace(/^[^ ]+ /,'')}`;
    if(i===idx) opt.selected = true;
    sel.appendChild(opt);
  });

  const grid = document.getElementById('week');
  grid.innerHTML = '';
  const state = loadState(week.start);

  for(let i=0;i<7;i++){
    const day = new Date(start.getTime()+i*MS);
    const card = document.createElement('div'); card.className='day';
    const h = document.createElement('h3');
    h.innerHTML = `<span>${EMOJI[i%EMOJI.length]} ${weekday(day)}</span><span>${fmt(day)}</span>`;
    card.appendChild(h);

    const tasks = week.plan[i] || [];
    const list = document.createElement('div'); list.className='tasks';
    tasks.forEach((t, j)=>{
      const id = `${i}::${j}`;
      const row = document.createElement('label'); row.className='task';
      const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!state[id];
      cb.addEventListener('change', ()=>{ state[id]=cb.checked; saveState(week.start,state); });
      const text = document.createElement('div');
      text.innerHTML = `${t.opt ? '(optional) ' : ''}${t.text}${t.meta?`<div class="meta">${t.meta}</div>`:''}`;
      row.appendChild(cb); row.appendChild(text); list.appendChild(row);
    });
    card.appendChild(list);
    grid.appendChild(card);
  }
}

/* ========= STORAGE (per-week) ========= */
function loadState(weekStartISO){ return JSON.parse(localStorage.getItem(`ghw-${weekStartISO}`)) || {}; }
function saveState(weekStartISO, state){ localStorage.setItem(`ghw-${weekStartISO}`, JSON.stringify(state)); }

/* ========= NAV ========= */
document.getElementById('prev').onclick = ()=>{ idx = Math.max(0, idx-1); render(); };
document.getElementById('next').onclick = ()=>{ idx = Math.min(WEEKS.length-1, idx+1); render(); };
document.getElementById('today').onclick = ()=>{
  const today = new Date();
  const found = WEEKS.findIndex(w => {
    const s = new Date(w.start+'T00:00:00'); const e = new Date(s.getTime()+6*MS);
    return today>=s && today<=e;
  });
  if(found>=0) idx = found; render();
};
document.getElementById('weekSelect').onchange = (e)=>{ idx = Number(e.target.value); render(); };

/* ========= BOOT ========= */
// auto-select the week that contains â€œtodayâ€ if present
(function init(){
  const today = new Date();
  const found = WEEKS.findIndex(w => {
    const s = new Date(w.start+'T00:00:00'); const e = new Date(s.getTime()+6*MS);
    return today>=s && today<=e;
  });
  if(found>=0) idx = found;
  render();
})();
</script>
</body>
</html>
